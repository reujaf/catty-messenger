(()=>{"use strict";var e={7284:(e,t,r)=>{r.r(t),r.d(t,{default:()=>oe});var n=r(296),a=r(6665),i=r(9576),o=r(9957),l=r(3378),s=r(1518),d=r(793),u=r(467),c=r(7908),f=r(7916),g=r(9685),h=(0,c.initializeApp)({apiKey:"AIzaSyCyUfIEyDGmwGZJU-VTbifk8ZhAStYRn24",authDomain:"catty-message.firebaseapp.com",databaseURL:"https://catty-message-default-rtdb.firebaseio.com",projectId:"catty-message",storageBucket:"catty-message.firebasestorage.app",messagingSenderId:"762334512293",appId:"1:762334512293:web:d3edbbb5de41c29c43f94c"}),m=(0,d.getAuth)(h),b=(0,f.getDatabase)(h);(0,g.getStorage)(h);Promise.resolve().then(r.bind(r,793)).then((function(e){var t=e.setPersistence,r=e.browserLocalPersistence;t(m,r).catch((function(e){console.error("Error setting auth persistence:",e)}))})),function(){var e=(0,u.default)((function*(){try{var e=(0,f.ref)(b,"test");yield(0,f.set)(e,{timestamp:(new Date).toISOString()}),console.log("Database connection successful")}catch(t){console.error("Database connection error:",t)}}));return function(){return e.apply(this,arguments)}}()();var y,p=r(3929),v=r(6283),x=r(6773),j=r(5648),C=r(4767),w=r(1690),k=r(3668),S=r(530),T=r(4618);y=(0,c.getApps)().length?(0,c.getApps)()[0]:(0,c.initializeApp)({apiKey:"AIzaSyCyUfIEyDGmwGZJU-VTbifk8ZhAStYRn24",authDomain:"catty-message.firebaseapp.com",databaseURL:"https://catty-message-default-rtdb.firebaseio.com",projectId:"catty-message",storageBucket:"catty-message.firebasestorage.app",messagingSenderId:"762334512293",appId:"1:762334512293:web:d3edbbb5de41c29c43f94c",measurementId:"G-F4YVW57WKW"});var B=(0,d.getAuth)(y),I=(0,f.getDatabase)(y),O=null;"undefined"!==typeof window&&"serviceWorker"in navigator&&(O=(0,T.getMessaging)(y));var z=null,A=!1;if("undefined"!==typeof window&&"serviceWorker"in navigator)try{window.addEventListener("load",(0,u.default)((function*(){try{if(z=yield navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/"}),console.log("Service Worker ba\u015far\u0131yla kaydedildi:",z.scope),!A){A=!0;var e=yield P();e&&console.log("FCM Token otomatik olarak al\u0131nd\u0131:",e)}}catch(t){console.error("Service Worker kayd\u0131 ba\u015far\u0131s\u0131z oldu:",t)}})))}catch(le){console.error("Service Worker hatas\u0131:",le)}var P=function(){var e=(0,u.default)((function*(){try{if("undefined"===typeof window||!("Notification"in window))return console.log("Bu taray\u0131c\u0131 bildirim deste\u011fi sunmuyor"),null;var e=yield Notification.requestPermission();if(console.log("Bildirim izni durumu:",e),"granted"===e){if(!O)return console.error("Messaging servisi ba\u015flat\u0131lamad\u0131"),null;try{z||(z=yield navigator.serviceWorker.getRegistration("/firebase-messaging-sw.js"));var t={vapidKey:"BGYiqKyl_5og4vKmlsCTDdWzrrppkdJ4mQNSQEtnStBPFab33zBDkw0yaCOcKkA4Hn3FlbScgkFvNd6NNR75_o8"};z&&(t.serviceWorkerRegistration=z);var r=yield(0,T.getToken)(O,t);return console.log("FCM Token al\u0131nd\u0131:",r),r}catch(n){return console.error("Token alma hatas\u0131:",n),null}}return null}catch(le){return console.error("Bildirim izni hatas\u0131:",le),null}}));return function(){return e.apply(this,arguments)}}(),U=r(397),E=k.default.create({container:{flex:1,backgroundColor:"#fff"},content:{flex:1,justifyContent:"center",alignItems:"center",padding:16},title:{fontSize:32,fontWeight:"bold",color:"#007AFF",marginBottom:32},form:{width:"100%",maxWidth:400},input:{width:"100%",backgroundColor:"#F8F8F8",borderWidth:1,borderColor:"#E5E7EB",borderRadius:8,padding:12,marginBottom:16,fontSize:16},button:{width:"100%",backgroundColor:"#007AFF",borderRadius:8,padding:12,marginBottom:16,alignItems:"center"},buttonDisabled:{opacity:.7},buttonText:{color:"#fff",fontSize:18,fontWeight:"600",textAlign:"center"},switchButton:{width:"100%"},switchButtonText:{color:"#6B7280",fontSize:16,textAlign:"center"}});const W=function(e){e.navigation;var t=(0,a.useState)(!0),r=(0,n.default)(t,2),i=r[0],o=r[1],l=(0,a.useState)(""),s=(0,n.default)(l,2),c=s[0],g=s[1],h=(0,a.useState)(""),m=(0,n.default)(h,2),b=m[0],y=m[1],k=(0,a.useState)(""),T=(0,n.default)(k,2),O=T[0],z=T[1],A=(0,a.useState)(!1),P=(0,n.default)(A,2),W=P[0],D=P[1],F=function(){var e=(0,u.default)((function*(){if(c&&b)if(i||O){D(!0);try{if(i){var e=yield(0,d.signInWithEmailAndPassword)(B,c,b);console.log("Giri\u015f ba\u015far\u0131l\u0131:",e.user.uid)}else{var t=(yield(0,d.createUserWithEmailAndPassword)(B,c,b)).user;yield(0,f.set)((0,f.ref)(I,`users/${t.uid}`),{email:c,username:O,createdAt:(new Date).toISOString()}),console.log("Kay\u0131t ba\u015far\u0131l\u0131:",t.uid)}}catch(le){console.error("Kimlik do\u011frulama hatas\u0131:",le),w.default.alert("Hata",function(e){switch(e.code){case"auth/invalid-email":return"Ge\xe7ersiz e-posta adresi format\u0131.";case"auth/user-disabled":return"Bu hesap devre d\u0131\u015f\u0131 b\u0131rak\u0131ld\u0131.";case"auth/user-not-found":return"Bu e-posta ile kay\u0131tl\u0131 hesap bulunamad\u0131.";case"auth/wrong-password":return"Yanl\u0131\u015f \u015fifre.";case"auth/email-already-in-use":return"Bu e-posta adresi ile zaten bir hesap var.";case"auth/weak-password":return"\u015eifre en az 6 karakter olmal\u0131d\u0131r.";case"auth/network-request-failed":return"A\u011f hatas\u0131. L\xfctfen internet ba\u011flant\u0131n\u0131z\u0131 kontrol edin.";default:return e.message}}(le))}finally{D(!1)}}else w.default.alert("Hata","L\xfctfen kullan\u0131c\u0131 ad\u0131 girin.");else w.default.alert("Hata","L\xfctfen t\xfcm alanlar\u0131 doldurun.")}));return function(){return e.apply(this,arguments)}}();return(0,U.jsx)(C.default,{behavior:"height",style:E.container,children:(0,U.jsxs)(p.default,{style:E.content,children:[(0,U.jsx)(v.default,{style:E.title,children:i?"Sign In":"Create Account"}),(0,U.jsxs)(p.default,{style:E.form,children:[!i&&(0,U.jsx)(x.default,{style:E.input,placeholder:"Username",value:O,onChangeText:z,autoCapitalize:"none",editable:!W}),(0,U.jsx)(x.default,{style:E.input,placeholder:"Email",value:c,onChangeText:g,keyboardType:"email-address",autoCapitalize:"none",editable:!W}),(0,U.jsx)(x.default,{style:E.input,placeholder:"Password",value:b,onChangeText:y,secureTextEntry:!0,editable:!W}),(0,U.jsx)(j.default,{style:[E.button,W&&E.buttonDisabled],onPress:F,disabled:W,children:W?(0,U.jsx)(S.default,{color:"#fff"}):(0,U.jsx)(v.default,{style:E.buttonText,children:i?"Sign In":"Create Account"})}),(0,U.jsx)(j.default,{style:E.switchButton,onPress:function(){return o(!i)},disabled:W,children:(0,U.jsx)(v.default,{style:E.switchButtonText,children:i?"Need an account? Sign Up":"Already have an account? Sign In"})})]})]})})};var D=r(4467),F=r(932),R=r(4701),M=r(484);function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){(0,D.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var H=k.default.create({container:{flex:1,backgroundColor:"#fff"},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center"},loadingText:{marginTop:10,fontSize:16,color:"#666"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:16,borderBottomWidth:1,borderBottomColor:"#e5e7eb",backgroundColor:"#fff"},headerTitle:{fontSize:24,fontWeight:"bold",color:"#1f2937"},headerButtons:{flexDirection:"row"},newChatButton:{backgroundColor:"#007AFF",paddingHorizontal:16,paddingVertical:8,borderRadius:20},newChatButtonText:{color:"#fff",fontWeight:"600"},notificationButton:{backgroundColor:"#4CAF50",paddingHorizontal:16,paddingVertical:8,borderRadius:20,marginRight:8},notificationButtonText:{color:"#fff",fontWeight:"600"},listContainer:{padding:16},chatItem:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:12,backgroundColor:"#fff",borderRadius:12,borderWidth:1,borderColor:"#e5e7eb",marginBottom:8},avatarContainer:{marginRight:12},avatar:{width:50,height:50,borderRadius:25},placeholderAvatar:{backgroundColor:"#e5e7eb",justifyContent:"center",alignItems:"center"},placeholderText:{fontSize:24,fontWeight:"bold",color:"#9ca3af"},chatInfo:{flex:1,marginRight:12},userEmail:{fontSize:16,fontWeight:"600",color:"#1f2937",marginBottom:4},lastMessage:{fontSize:14,color:"#6b7280"},timestamp:{fontSize:12,color:"#9ca3af"},emptyContainer:{flex:1,justifyContent:"center",alignItems:"center",padding:16},emptyText:{fontSize:18,color:"#6b7280",marginBottom:16},startChatButton:{backgroundColor:"#007AFF",paddingHorizontal:24,paddingVertical:12,borderRadius:24},startChatButtonText:{color:"#fff",fontWeight:"600",fontSize:16}});const $=function(e){var t=e.navigation,r=(0,a.useState)([]),i=(0,n.default)(r,2),o=i[0],l=i[1],s=(0,a.useState)(!0),d=(0,n.default)(s,2),c=d[0],g=d[1],h=(0,a.useState)({}),m=(0,n.default)(h,2),b=m[0],y=m[1],x=(0,a.useState)(null),C=(0,n.default)(x,2),k=C[0],z=C[1];(0,a.useEffect)((function(){var e=!0,r=null,n=function(){var e=(0,u.default)((function*(){try{var e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test("undefined"!==typeof navigator?navigator.userAgent:""),t=e?"mobile-web":"web";console.log(`Bildirim kurulumu ba\u015flat\u0131l\u0131yor. Platform: ${t}, UA: ${navigator.userAgent.substring(0,50)}...`);var r=yield P();if(r){z(r);var n=B.currentUser;if(n){var i=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test("undefined"!==typeof navigator?navigator.userAgent:"")?"mobile-web":"web",o=(0,f.ref)(I,`users/${n.uid}`);yield(0,f.update)(o,{fcmToken:r,platform:i,lastTokenUpdate:(new Date).toISOString(),lastLoginAt:(new Date).toISOString(),userAgent:"undefined"!==typeof navigator?navigator.userAgent:"unknown"}),console.log(`Bildirim token kullan\u0131c\u0131 profiline kaydedildi. Platform: ${i}`)}}console.log("\xd6n plan bildirim dinleyicisi ba\u015flat\u0131l\u0131yor..."),new Promise((function(e){if(!O)return console.error("Messaging servisi ba\u015flat\u0131lamad\u0131, bildirimler \xe7al\u0131\u015fmayacak"),void e(null);(0,T.onMessage)(O,(function(t){if(console.log("\xd6n planda yeni mesaj al\u0131nd\u0131:",t),t.notification)try{if("Notification"in window&&"granted"===Notification.permission&&(new Notification(t.notification.title,{body:t.notification.body,icon:t.notification.icon||"/favicon.ico",tag:`message-${Date.now()}`,renotify:!0}),console.log("Bildirim g\xf6sterildi")),"AudioContext"in window||"webkitAudioContext"in window){var r=new(window.AudioContext||window.webkitAudioContext),n=r.createOscillator(),a=r.createGain();n.type="sine",n.frequency.value=800,a.gain.value=.1,n.connect(a),a.connect(r.destination),n.start(),setTimeout((function(){n.stop()}),200)}}catch(le){console.error("Bildirim g\xf6sterme hatas\u0131:",le)}e(t)}))})).then((function(t){if(t){var r=t.notification||{},n=r.title,i=r.body;console.log("Web Push bildirimi al\u0131nd\u0131:",{title:n,body:i});try{!function(){if("AudioContext"in window||"webkitAudioContext"in window){var e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),r=e.createGain();t.type="sine",t.frequency.value=800,r.gain.value=.1,t.connect(r),r.connect(e.destination),t.start(),setTimeout((function(){t.stop()}),200)}}(),e&&"Notification"in window&&"granted"===Notification.permission&&setTimeout((function(){new Notification(n||"Yeni mesaj",{body:i||"Yeni bir mesaj ald\u0131n\u0131z",icon:"/favicon.ico",tag:`direct-message-${Date.now()}`,renotify:!0})}),100)}catch(o){console.error("Bildirim sesi \xe7al\u0131namad\u0131:",o)}a()}})).catch((function(e){return console.error("Bildirim al\u0131namad\u0131:",e)})),"serviceWorker"in navigator&&(console.log("Service worker olay dinleyicisi ekleniyor"),navigator.serviceWorker.onmessage=null,navigator.serviceWorker.onmessage=function(e){console.log("Service worker mesaj\u0131 al\u0131nd\u0131:",e.data),!e.data||"NOTIFICATION_RECEIVED"!==e.data.type&&"NOTIFICATION_CLICKED"!==e.data.type||a()},navigator.serviceWorker.ready.then((function(e){console.log("Service worker haz\u0131r:",e.scope)})).catch((function(e){console.error("Service worker eri\u015fim hatas\u0131:",e)})))}catch(le){console.error("Bildirim kurulumu hatas\u0131:",le)}}));return function(){return e.apply(this,arguments)}}(),a=function(){var n=(0,u.default)((function*(){try{var n=B.currentUser;if(!n)return t.replace("Login"),void g(!1);var a=(0,f.ref)(I,"privateChats");r=(0,f.onValue)(a,function(){var t=(0,u.default)((function*(t){if(e)try{if(!t.exists())return l([]),void g(!1);var r=t.val(),a=[];for(var i in r)if(i.includes(n.uid))try{var o=i.split("_").find((function(e){return e!==n.uid})),s=(0,f.ref)(I,`users/${o}`),d=yield(0,f.get)(s);if(d.exists()){var u=N({uid:o},d.val()),c=(0,f.ref)(I,`privateChats/${i}/messages`),h=yield(0,f.get)((0,f.query)(c,(0,f.limitToLast)(1)));if(h.exists()){var m=h.val(),b=Object.values(m)[0];a.push({chatId:i,otherUserId:u.uid,otherUserEmail:u.email,otherUserProfileImage:u.profileImage,lastMessage:b.text,timestamp:b.timestamp,isCurrentUser:b.senderId===n.uid})}}}catch(le){console.error("Sohbet i\u015fleme hatas\u0131:",le)}e&&(l(a.sort((function(e,t){return t.timestamp-e.timestamp}))),y({}))}catch(le){console.error("Sohbet listener hatas\u0131:",le)}finally{e&&g(!1)}}));return function(e){return t.apply(this,arguments)}}())}catch(le){console.error("Ba\u015flang\u0131\xe7 kurulum hatas\u0131:",le),e&&g(!1)}}));return function(){return n.apply(this,arguments)}}();return a().then((function(){n()})),function(){e=!1,r&&r(),Object.values(b).forEach((function(e){return e()}))}}),[t]);var A=(0,a.useCallback)((function(e){t.navigate("Chat",{currentUserId:B.currentUser.uid,otherUserId:e.otherUserId,chatId:e.chatId,otherUserEmail:e.otherUserEmail})}),[t]),E=(0,a.useCallback)((function(){t.navigate("Users")}),[t]),W=(0,a.useCallback)((0,u.default)((function*(){try{console.log("Bildirim izni isteniyor...");var e=yield P();if(e){z(e);try{new Notification("Bildirimler Etkin",{body:"Art\u0131k Catty Message bildirimleri alacaks\u0131n\u0131z",icon:"/favicon.ico"})}catch(a){console.error("Test bildirimi g\xf6sterme hatas\u0131:",a)}w.default.alert("Ba\u015far\u0131l\u0131","Bildirim izni verildi. Art\u0131k mesaj bildirimleri alacaks\u0131n\u0131z.");var t=B.currentUser;if(t){var r=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test("undefined"!==typeof navigator?navigator.userAgent:"")?"mobile-web":"web",n=(0,f.ref)(I,`users/${t.uid}`);yield(0,f.update)(n,{fcmToken:e,platform:r,lastTokenUpdate:(new Date).toISOString(),userAgent:"undefined"!==typeof navigator?navigator.userAgent:"unknown"}),console.log(`Bildirim token kullan\u0131c\u0131 profiline kaydedildi. Platform: ${r}`)}}else w.default.alert("Bildirim \u0130zni","Bildirim izni verilmedi. Mesaj bildirimleri almak i\xe7in izin vermeniz gerekiyor.")}catch(le){console.error("Bildirim izni hatas\u0131:",le),w.default.alert("Hata","Bildirim izni istenirken bir hata olu\u015ftu.")}})),[]),D=(0,a.useCallback)((function(e){var t,r,n=e.item;return(0,U.jsxs)(j.default,{style:H.chatItem,onPress:function(){return A(n)},children:[(0,U.jsx)(p.default,{style:H.avatarContainer,children:n.otherUserProfileImage?(0,U.jsx)(M.default,{source:{uri:n.otherUserProfileImage},style:H.avatar,onError:function(e){return console.log("Resim y\xfckleme hatas\u0131:",e.nativeEvent.error)}}):(0,U.jsx)(p.default,{style:[H.avatar,H.placeholderAvatar],children:(0,U.jsx)(v.default,{style:H.placeholderText,children:(null==(t=n.otherUserEmail)||null==(r=t.charAt(0))?void 0:r.toUpperCase())||"?"})})}),(0,U.jsxs)(p.default,{style:H.chatInfo,children:[(0,U.jsx)(v.default,{style:H.userEmail,children:n.otherUserEmail}),(0,U.jsxs)(v.default,{style:H.lastMessage,numberOfLines:1,children:[n.isCurrentUser?"Siz: ":"",n.lastMessage]})]}),(0,U.jsx)(v.default,{style:H.timestamp,children:new Date(n.timestamp).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})})]})}),[A]);return c?(0,U.jsxs)(p.default,{style:H.loadingContainer,children:[(0,U.jsx)(S.default,{size:"large",color:"#007AFF"}),(0,U.jsx)(v.default,{style:H.loadingText,children:"Sohbetler y\xfckleniyor..."})]}):(0,U.jsxs)(R.default,{style:H.container,children:[(0,U.jsxs)(p.default,{style:H.header,children:[(0,U.jsx)(v.default,{style:H.headerTitle,children:"Sohbetler"}),(0,U.jsxs)(p.default,{style:H.headerButtons,children:[!k&&(0,U.jsx)(j.default,{style:H.notificationButton,onPress:W,children:(0,U.jsx)(v.default,{style:H.notificationButtonText,children:"Bildirimleri A\xe7"})}),(0,U.jsx)(j.default,{style:H.newChatButton,onPress:E,children:(0,U.jsx)(v.default,{style:H.newChatButtonText,children:"Yeni Sohbet"})})]})]}),0===o.length?(0,U.jsxs)(p.default,{style:H.emptyContainer,children:[(0,U.jsx)(v.default,{style:H.emptyText,children:"Hen\xfcz mesaj\u0131n\u0131z yok"}),(0,U.jsx)(j.default,{style:H.startChatButton,onPress:E,children:(0,U.jsx)(v.default,{style:H.startChatButtonText,children:"Yeni Sohbet Ba\u015flat"})})]}):(0,U.jsx)(F.default,{data:o,renderItem:D,keyExtractor:function(e){return e.chatId},contentContainerStyle:H.listContainer})]})};var K=r(8382);function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Y=k.default.create({container:{flex:1,backgroundColor:"#fff"},header:{padding:16,borderBottomWidth:1,borderBottomColor:"#e5e5e5",backgroundColor:"#fff"},headerText:{fontSize:18,fontWeight:"bold",color:"#1f2937"},messageList:{flex:1,padding:16},messageListContent:{flexGrow:1},messageContainer:{maxWidth:"80%",marginVertical:8,padding:12,borderRadius:16},currentUserMessage:{alignSelf:"flex-end",backgroundColor:"#007AFF"},otherUserMessage:{alignSelf:"flex-start",backgroundColor:"#f3f4f6"},senderName:{fontSize:12,color:"#6b7280",marginBottom:4},messageText:{fontSize:16},currentUserText:{color:"#fff"},otherUserText:{color:"#000"},timestamp:{fontSize:12,alignSelf:"flex-end",marginTop:4},currentUserTimestamp:{color:"rgba(255, 255, 255, 0.8)"},otherUserTimestamp:{color:"#6b7280"},inputContainer:{flexDirection:"row",padding:16,borderTopWidth:1,borderTopColor:"#e5e5e5",backgroundColor:"#fff"},input:{flex:1,borderWidth:1,borderColor:"#d1d5db",borderRadius:24,paddingHorizontal:16,paddingVertical:8,marginRight:8,maxHeight:100,backgroundColor:"#fff"},sendButton:{backgroundColor:"#007AFF",borderRadius:24,paddingHorizontal:24,paddingVertical:8,justifyContent:"center",alignItems:"center"},sendButtonText:{color:"#fff",fontWeight:"600"}});const G=function(e){var t=e.route.params,i=t.currentUserId,o=t.otherUserId,l=t.chatId,s=t.otherUserEmail,d=(0,a.useState)([]),c=(0,n.default)(d,2),g=c[0],h=c[1],m=(0,a.useState)(""),b=(0,n.default)(m,2),y=b[0],k=b[1],S=(0,a.useRef)(null),T=(0,a.useRef)(new K.default.Value(0)).current;(0,a.useEffect)((function(){var e=(0,f.ref)(I,`privateChats/${l}/messages`);return(0,f.onValue)(e,(function(e){var t=e.val();if(t){var r=Object.entries(t).map((function(e){var t=(0,n.default)(e,2);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){(0,D.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:t[0]},t[1])}));h(r),setTimeout((function(){var e;null==(e=S.current)||e.scrollToEnd({animated:!0})}),100)}else h([])})),function(){(0,f.off)(e)}}),[l]);var O=function(){var e=(0,u.default)((function*(e,t){try{var n=(0,f.ref)(I,`users/${e}`),a=yield(0,f.get)(n);if(a.exists()){var d=a.val(),u=d.fcmToken,c=B.currentUser.email;if(e===i)return void console.log("Kendi mesaj\u0131n\u0131 g\xf6nderen kullan\u0131c\u0131ya bildirim g\xf6nderilmiyor");if(console.log(`Al\u0131c\u0131 bilgileri: ${e}, FCM Token: ${null==u?void 0:u.substring(0,15)}... Platform: ${d.platform||"bilinmiyor"}`),u){var g;console.log("web platformundan bildirim g\xf6nderiliyor");var h={to:u,notification:{title:`Yeni mesaj: ${c}`,body:t.text,icon:"/favicon.ico",badge:"/badge.png",tag:`message-${Date.now()}`,sound:"default"},data:{type:"NEW_MESSAGE",chatId:l,senderId:i,senderEmail:c,otherUserId:o,otherUserEmail:s,messageText:t.text,timestamp:t.timestamp,url:"undefined"!==typeof window?window.location.origin:""},priority:"high",content_available:!0};("mobile-web"===d.platform||null!=(g=d.userAgent)&&g.includes("Mobile"))&&(h.webpush={headers:{TTL:"86400",Urgency:"high"},notification:{requireInteraction:!0,vibrate:[200,100,200]},fcm_options:{link:"undefined"!==typeof window?window.location.origin:""}});r.g.fetch("https://fcm.googleapis.com/fcm/send",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"key=AAAAsZ-Vz2w:APA91bG_zBWyqJZMbpZqZ8O00Tk8RR3-5CxjFEWQNZAKpQ6KcBnVVKhvxUMmrNtFLQzdpfXHTLbCnx4eHbHn5P2qpujmuxJUzf54ByQ-vQrDcTxhHJAHZFqVMH47fFxIvS0fzUoDPFGo"},body:JSON.stringify(h)}).then((function(e){if(console.log(`FCM API yan\u0131t\u0131 status: ${e.status}`),!e.ok)throw new Error(`HTTP hata, durum: ${e.status}`);return e.json()})).then((function(e){var r;console.log("Bildirim ba\u015far\u0131yla g\xf6nderildi:",e),"undefined"!==typeof window&&"Notification"in window&&"granted"===Notification.permission&&("mobile-web"===d.platform||null!=(r=d.userAgent)&&r.includes("Mobile"))&&setTimeout((function(){try{new Notification(`Yeni mesaj: ${c}`,{body:t.text,icon:"/favicon.ico",tag:`direct-message-${Date.now()}`,renotify:!0,vibrate:[200,100,200],requireInteraction:!0}),console.log("Mobil web i\xe7in ek bildirim g\xf6sterildi")}catch(e){console.error("Browser bildirimi g\xf6sterme hatas\u0131:",e)}}),300)})).catch((function(e){if(console.error("FCM bildirim hatas\u0131:",e),"undefined"!==typeof window&&"Notification"in window&&"granted"===Notification.permission)try{new Notification(`Yeni mesaj: ${c}`,{body:t.text,icon:"/favicon.ico",tag:`direct-message-fallback-${Date.now()}`,renotify:!0,vibrate:[200,100,200]}),console.log("FCM hatas\u0131 - Do\u011frudan taray\u0131c\u0131 bildirimi g\xf6nderildi")}catch(r){console.error("Yedek bildirim hatas\u0131:",r)}}))}else console.log(`Al\u0131c\u0131n\u0131n (${e}) FCM token'\u0131 bulunmuyor`)}else console.log(`Al\u0131c\u0131 kullan\u0131c\u0131 bulunamad\u0131: ${e}`)}catch(le){console.error("Bildirim g\xf6nderme hatas\u0131:",le)}}));return function(t,r){return e.apply(this,arguments)}}();return(0,U.jsxs)(R.default,{style:Y.container,children:[(0,U.jsx)(p.default,{style:Y.header,children:(0,U.jsxs)(v.default,{style:Y.headerText,children:[s," ile Sohbet"]})}),(0,U.jsx)(F.default,{ref:S,data:g,renderItem:function(e){var t=e.item,r=t.senderId===i;return(0,U.jsxs)(K.default.View,{style:[Y.messageContainer,r?Y.currentUserMessage:Y.otherUserMessage,{transform:[{translateY:T.interpolate({inputRange:[0,1],outputRange:[0,-10]})}]}],children:[(0,U.jsx)(v.default,{style:Y.senderName,children:r?"Siz":s}),(0,U.jsx)(v.default,{style:[Y.messageText,r?Y.currentUserText:Y.otherUserText],children:t.text}),(0,U.jsx)(v.default,{style:[Y.timestamp,r?Y.currentUserTimestamp:Y.otherUserTimestamp],children:new Date(t.timestamp).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})})]})},keyExtractor:function(e){return e.id},style:Y.messageList,contentContainerStyle:Y.messageListContent,inverted:!1,onContentSizeChange:function(){var e;return null==(e=S.current)?void 0:e.scrollToEnd({animated:!0})},onLayout:function(){var e;return null==(e=S.current)?void 0:e.scrollToEnd({animated:!0})}}),(0,U.jsxs)(C.default,{behavior:"height",style:Y.inputContainer,children:[(0,U.jsx)(x.default,{style:Y.input,value:y,onChangeText:k,placeholder:"Mesaj yaz\u0131n...",multiline:!0}),(0,U.jsx)(j.default,{style:Y.sendButton,onPress:function(){if(y.trim()){var e=(0,f.ref)(I,`privateChats/${l}/messages`),t=(0,f.push)(e),r={senderId:i,text:y,timestamp:Date.now()};K.default.sequence([K.default.timing(T,{toValue:1,duration:200,useNativeDriver:!1}),K.default.timing(T,{toValue:0,duration:200,useNativeDriver:!1})]).start(),(0,f.set)(t,r).then((function(){k(""),setTimeout((function(){var e;null==(e=S.current)||e.scrollToEnd({animated:!0})}),100),O(o,r)})).catch((function(e){w.default.alert("Hata","Mesaj g\xf6nderilirken bir hata olu\u015ftu.")}))}},children:(0,U.jsx)(v.default,{style:Y.sendButtonText,children:"G\xf6nder"})})]})]})};var _=r(8264),q=k.default.create({container:{flex:1,backgroundColor:"#fff"},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#fff"},content:{flex:1,padding:16},title:{fontSize:24,fontWeight:"bold",color:"#1f2937",marginBottom:24},inputContainer:{marginBottom:16},label:{fontSize:14,color:"#4b5563",marginBottom:8},input:{backgroundColor:"#f9fafb",borderWidth:1,borderColor:"#e5e7eb",borderRadius:12,padding:12,fontSize:16,color:"#1f2937"},button:{borderRadius:12,padding:16,alignItems:"center",justifyContent:"center",marginBottom:12},updateButton:{backgroundColor:"#007AFF"},logoutButton:{backgroundColor:"#ef4444"},buttonText:{color:"#fff",fontSize:16,fontWeight:"600"},profileSection:{alignItems:"center",marginVertical:32},imageContainer:{width:150,height:150,borderRadius:75,marginBottom:16,position:"relative",justifyContent:"center",alignItems:"center",backgroundColor:"#f3f4f6"},profileImage:{width:"100%",height:"100%",borderRadius:75},placeholderImage:{width:"100%",height:"100%",borderRadius:75,backgroundColor:"#e5e7eb",justifyContent:"center",alignItems:"center"},placeholderText:{fontSize:48,fontWeight:"bold",color:"#9ca3af"},editBadge:{position:"absolute",bottom:0,right:0,backgroundColor:"#007AFF",paddingHorizontal:12,paddingVertical:6,borderRadius:16},editBadgeText:{color:"#fff",fontSize:12,fontWeight:"600"},email:{fontSize:18,fontWeight:"600",color:"#1f2937",marginBottom:4},modalContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},modalContent:{backgroundColor:"white",borderRadius:20,padding:20,width:"90%",maxWidth:400},modalTitle:{fontSize:18,fontWeight:"bold",marginBottom:15,color:"#1f2937"},modalInput:{backgroundColor:"#f9fafb",borderWidth:1,borderColor:"#e5e7eb",borderRadius:12,padding:12,fontSize:16,color:"#1f2937",marginBottom:15},modalButtons:{flexDirection:"row",justifyContent:"flex-end"},modalButton:{paddingVertical:8,paddingHorizontal:16,borderRadius:8,marginLeft:10},cancelButton:{backgroundColor:"#ef4444"},saveButton:{backgroundColor:"#007AFF"},modalButtonText:{color:"white",fontSize:14,fontWeight:"600"}});const Z=function(e){var t,r=e.navigation,i=(0,a.useState)(""),o=(0,n.default)(i,2),l=o[0],s=o[1],c=(0,a.useState)(""),g=(0,n.default)(c,2),h=g[0],m=g[1],b=(0,a.useState)(""),y=(0,n.default)(b,2),C=y[0],k=y[1],T=(0,a.useState)(!0),B=(0,n.default)(T,2),O=B[0],z=B[1],A=(0,a.useState)(!1),P=(0,n.default)(A,2),E=P[0],W=P[1],D=(0,a.useState)(null),F=(0,n.default)(D,2),L=F[0],N=F[1],H=(0,a.useState)(!1),$=(0,n.default)(H,2),K=$[0],V=$[1],Y=(0,a.useState)(""),G=(0,n.default)(Y,2),Z=G[0],J=G[1];(0,a.useEffect)((function(){var e=(0,d.getAuth)().currentUser;if(e){var t=(0,f.ref)(I,`users/${e.uid}`);(0,f.get)(t).then((function(e){e.exists()&&(s(e.val().username||""),N(e.val().profileImage)),z(!1)}))}else r.navigate("Login")}),[r]);var Q=function(){var e=(0,u.default)((function*(){try{W(!0);var e=(0,d.getAuth)().currentUser;if(h&&C){if(h!==C)return void w.default.alert("Hata","\u015eifreler e\u015fle\u015fmiyor");if(h.length<6)return void w.default.alert("Hata","\u015eifre en az 6 karakter olmal\u0131d\u0131r");yield(0,d.updatePassword)(e,h)}var t=(0,f.ref)(I,`users/${e.uid}`);yield(0,f.set)(t,{email:e.email,username:l,profileImage:L}),w.default.alert("Ba\u015far\u0131l\u0131","Profil g\xfcncellendi"),m(""),k("")}catch(le){w.default.alert("Hata",le.message)}finally{W(!1)}}));return function(){return e.apply(this,arguments)}}(),X=function(){var e=(0,u.default)((function*(){try{var e=(0,d.getAuth)();yield(0,d.signOut)(e),r.navigate("Login")}catch(le){w.default.alert("Hata",le.message)}}));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=(0,u.default)((function*(){if(Z)try{var e,t=yield fetch(Z);if(!t.ok||null==(e=t.headers.get("content-type"))||!e.includes("image"))throw new Error("Ge\xe7ersiz resim URL'i");var r=(0,d.getAuth)().currentUser,n=(0,f.ref)(I,`users/${r.uid}`);yield(0,f.set)(n,{email:r.email,username:l,profileImage:Z}),N(Z),V(!1),J(""),w.default.alert("Ba\u015far\u0131l\u0131","Profil foto\u011fraf\u0131 g\xfcncellendi")}catch(le){w.default.alert("Hata","Ge\xe7ersiz resim URL'i. L\xfctfen ba\u015fka bir URL deneyin.")}else w.default.alert("Hata","Ge\xe7erli bir URL girmelisiniz")}));return function(){return e.apply(this,arguments)}}();return O?(0,U.jsx)(p.default,{style:q.loadingContainer,children:(0,U.jsx)(S.default,{size:"large",color:"#007AFF"})}):(0,U.jsxs)(R.default,{style:q.container,children:[(0,U.jsx)(_.default,{animationType:"slide",transparent:!0,visible:K,onRequestClose:function(){return V(!1)},children:(0,U.jsx)(p.default,{style:q.modalContainer,children:(0,U.jsxs)(p.default,{style:q.modalContent,children:[(0,U.jsx)(v.default,{style:q.modalTitle,children:"Profil Foto\u011fraf\u0131 URL"}),(0,U.jsx)(x.default,{style:q.modalInput,value:Z,onChangeText:J,placeholder:"Resim URL'ini girin",placeholderTextColor:"#9ca3af"}),(0,U.jsxs)(p.default,{style:q.modalButtons,children:[(0,U.jsx)(j.default,{style:[q.modalButton,q.cancelButton],onPress:function(){V(!1),J("")},children:(0,U.jsx)(v.default,{style:q.modalButtonText,children:"\u0130ptal"})}),(0,U.jsx)(j.default,{style:[q.modalButton,q.saveButton],onPress:ee,children:(0,U.jsx)(v.default,{style:q.modalButtonText,children:"Kaydet"})})]})]})})}),(0,U.jsxs)(p.default,{style:q.content,children:[(0,U.jsx)(v.default,{style:q.title,children:"Hesap Ayarlar\u0131"}),(0,U.jsxs)(p.default,{style:q.profileSection,children:[(0,U.jsxs)(j.default,{style:q.imageContainer,onPress:function(){V(!0)},children:[L?(0,U.jsx)(M.default,{source:{uri:L},style:q.profileImage,onError:function(){w.default.alert("Hata","Foto\u011fraf y\xfcklenirken bir hata olu\u015ftu."),N(null)}}):(0,U.jsx)(p.default,{style:q.placeholderImage,children:(0,U.jsx)(v.default,{style:q.placeholderText,children:(null==l||null==(t=l.charAt(0))?void 0:t.toUpperCase())||"?"})}),(0,U.jsx)(p.default,{style:q.editBadge,children:(0,U.jsx)(v.default,{style:q.editBadgeText,children:"D\xfczenle"})})]}),(0,U.jsx)(v.default,{style:q.email,children:l})]}),(0,U.jsxs)(p.default,{style:q.inputContainer,children:[(0,U.jsx)(v.default,{style:q.label,children:"Kullan\u0131c\u0131 Ad\u0131"}),(0,U.jsx)(x.default,{style:q.input,value:l,onChangeText:s,placeholder:"Kullan\u0131c\u0131 ad\u0131n\u0131z\u0131 girin",placeholderTextColor:"#9ca3af"})]}),(0,U.jsxs)(p.default,{style:q.inputContainer,children:[(0,U.jsx)(v.default,{style:q.label,children:"Yeni \u015eifre"}),(0,U.jsx)(x.default,{style:q.input,value:h,onChangeText:m,placeholder:"Yeni \u015fifrenizi girin",placeholderTextColor:"#9ca3af",secureTextEntry:!0})]}),(0,U.jsxs)(p.default,{style:q.inputContainer,children:[(0,U.jsx)(v.default,{style:q.label,children:"\u015eifre Tekrar"}),(0,U.jsx)(x.default,{style:q.input,value:C,onChangeText:k,placeholder:"\u015eifrenizi tekrar girin",placeholderTextColor:"#9ca3af",secureTextEntry:!0})]}),(0,U.jsx)(j.default,{style:[q.button,q.updateButton],onPress:Q,disabled:E,children:E?(0,U.jsx)(S.default,{color:"white"}):(0,U.jsx)(v.default,{style:q.buttonText,children:"Profili G\xfcncelle"})}),(0,U.jsx)(j.default,{style:[q.button,q.logoutButton],onPress:X,children:(0,U.jsx)(v.default,{style:q.buttonText,children:"\xc7\u0131k\u0131\u015f Yap"})})]})]})};function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Q=k.default.create({container:{flex:1,backgroundColor:"#fff"},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#fff"},searchContainer:{padding:16,borderBottomWidth:1,borderBottomColor:"#e5e7eb",backgroundColor:"#fff"},searchInput:{backgroundColor:"#f9fafb",borderWidth:1,borderColor:"#e5e7eb",borderRadius:12,padding:12,fontSize:16,color:"#1f2937"},listContainer:{padding:16},userItem:{backgroundColor:"#fff",borderRadius:12,padding:16,marginBottom:8,borderWidth:1,borderColor:"#e5e7eb"},userInfo:{flex:1},userEmail:{fontSize:16,fontWeight:"600",color:"#1f2937",marginBottom:4},username:{fontSize:14,color:"#6b7280"},emptyContainer:{flex:1,justifyContent:"center",alignItems:"center",padding:16},emptyText:{fontSize:16,color:"#6b7280",textAlign:"center"}});const X=function(e){var t=e.navigation,r=(0,a.useState)([]),i=(0,n.default)(r,2),o=i[0],l=i[1],s=(0,a.useState)(!0),c=(0,n.default)(s,2),g=c[0],h=c[1],m=(0,a.useState)(""),b=(0,n.default)(m,2),y=b[0],C=b[1];(0,a.useEffect)((function(){var e=(0,d.getAuth)().currentUser;if(e){var r=(0,f.ref)(I,"users"),a=(0,f.onValue)(r,(function(t){var r=t.val();if(r){var a=Object.entries(r).filter((function(t){return(0,n.default)(t,1)[0]!==e.uid})).map((function(e){var t=(0,n.default)(e,2);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){(0,D.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({uid:t[0]},t[1])}));l(a)}else l([]);h(!1)}));return function(){return a()}}t.navigate("Login")}),[t]);var k=o.filter((function(e){return e.email&&e.email.toLowerCase().includes(y.toLowerCase())})),T=function(){var e=(0,u.default)((function*(e){try{var r=(0,d.getAuth)().currentUser,a=(0,f.ref)(I,"privateChats"),i=yield(0,f.get)(a);if(i.exists()){var o=i.val(),l=Object.entries(o).find((function(t){var a=(0,n.default)(t,1)[0];return a.includes(r.uid)&&a.includes(e.uid)}));if(l)return void t.navigate("Chat",{currentUserId:r.uid,otherUserId:e.uid,chatId:l[0],otherUserEmail:e.email})}var s=`${r.uid}_${e.uid}`,u=(0,f.ref)(I,`privateChats/${s}`),c={participants:(0,D.default)((0,D.default)({},r.uid,r.email),e.uid,e.email),lastMessage:"",lastMessageTime:(new Date).toISOString(),deletedBy:(0,D.default)((0,D.default)({},r.uid,!1),e.uid,!1)};yield(0,f.set)(u,c),t.navigate("Chat",{currentUserId:r.uid,otherUserId:e.uid,chatId:s,otherUserEmail:e.email})}catch(le){console.error("Yeni sohbet ba\u015flatma hatas\u0131:",le),w.default.alert("Hata","Yeni sohbet ba\u015flat\u0131l\u0131rken bir hata olu\u015ftu")}}));return function(t){return e.apply(this,arguments)}}();return g?(0,U.jsx)(p.default,{style:Q.loadingContainer,children:(0,U.jsx)(S.default,{size:"large",color:"#007AFF"})}):(0,U.jsxs)(R.default,{style:Q.container,children:[(0,U.jsx)(p.default,{style:Q.searchContainer,children:(0,U.jsx)(x.default,{style:Q.searchInput,placeholder:"Kullan\u0131c\u0131 Ara...",placeholderTextColor:"#9ca3af",value:y,onChangeText:C})}),(0,U.jsx)(F.default,{data:k,renderItem:function(e){var t=e.item;return(0,U.jsx)(j.default,{style:Q.userItem,onPress:function(){return T(t)},children:(0,U.jsxs)(p.default,{style:Q.userInfo,children:[(0,U.jsx)(v.default,{style:Q.userEmail,children:t.email}),t.username&&(0,U.jsx)(v.default,{style:Q.username,children:t.username})]})})},keyExtractor:function(e){return e.uid},contentContainerStyle:Q.listContainer,ListEmptyComponent:(0,U.jsx)(p.default,{style:Q.emptyContainer,children:(0,U.jsx)(v.default,{style:Q.emptyText,children:y?"Sonu\xe7 bulunamad\u0131":"Kullan\u0131c\u0131 bulunamad\u0131"})})})]})};function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var te=k.default.create({container:{flex:1,backgroundColor:"#fff"},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center"},loadingText:{marginTop:10,fontSize:16,color:"#666"},errorContainer:{flex:1,justifyContent:"center",alignItems:"center",padding:20},errorText:{fontSize:16,color:"#ef4444",textAlign:"center",marginBottom:20},retryButton:{backgroundColor:"#007AFF",paddingHorizontal:20,paddingVertical:10,borderRadius:12},retryButtonText:{color:"#fff",fontSize:16,fontWeight:"600"},header:{padding:16,borderBottomWidth:1,borderBottomColor:"#e5e7eb",backgroundColor:"#fff"},headerTitle:{fontSize:20,fontWeight:"bold",color:"#1f2937"},listContainer:{padding:16},userItem:{backgroundColor:"#fff",borderRadius:12,padding:16,marginBottom:8,borderWidth:1,borderColor:"#e5e7eb"},userInfo:{flex:1},userEmail:{fontSize:16,fontWeight:"600",color:"#1f2937",marginBottom:4},username:{fontSize:14,color:"#6b7280"},emptyContainer:{flex:1,justifyContent:"center",alignItems:"center",padding:16},emptyText:{fontSize:16,color:"#6b7280"}});const re=function(e){var t=e.navigation,r=(e.route,(0,a.useState)([])),i=(0,n.default)(r,2),o=i[0],l=i[1],s=(0,a.useState)(!0),d=(0,n.default)(s,2),c=d[0],g=d[1],h=(0,a.useState)(null),m=(0,n.default)(h,2),b=m[0],y=m[1];(0,a.useEffect)((function(){var e=function(){var e=(0,u.default)((function*(){try{g(!0),y(null);var e=B.currentUser;if(!e)throw new Error("Kullan\u0131c\u0131 giri\u015fi bulunamad\u0131");var t=(0,f.ref)(I,"users"),r=yield(0,f.get)(t);if(!r.exists())return void l([]);var a=r.val(),i=Object.entries(a).map((function(e){var t=(0,n.default)(e,2);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){(0,D.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({uid:t[0]},t[1])})).filter((function(t){return t.uid!==e.uid}));l(i)}catch(b){console.error("Kullan\u0131c\u0131lar y\xfcklenirken hata:",b),y(b.message),w.default.alert("Hata","Kullan\u0131c\u0131lar y\xfcklenemedi. L\xfctfen tekrar deneyin.")}finally{g(!1)}}));return function(){return e.apply(this,arguments)}}();e()}),[]);return c?(0,U.jsxs)(p.default,{style:te.loadingContainer,children:[(0,U.jsx)(S.default,{size:"large",color:"#007AFF"}),(0,U.jsx)(v.default,{style:te.loadingText,children:"Kullan\u0131c\u0131lar y\xfckleniyor..."})]}):b?(0,U.jsxs)(p.default,{style:te.errorContainer,children:[(0,U.jsx)(v.default,{style:te.errorText,children:b}),(0,U.jsx)(j.default,{style:te.retryButton,onPress:function(){return g(!0)},children:(0,U.jsx)(v.default,{style:te.retryButtonText,children:"Tekrar Dene"})})]}):(0,U.jsxs)(R.default,{style:te.container,children:[(0,U.jsx)(p.default,{style:te.header,children:(0,U.jsx)(v.default,{style:te.headerTitle,children:"Sohbet Etmek \u0130stedi\u011finiz Ki\u015fiyi Se\xe7in"})}),0===o.length?(0,U.jsx)(p.default,{style:te.emptyContainer,children:(0,U.jsx)(v.default,{style:te.emptyText,children:"Kullan\u0131labilir kullan\u0131c\u0131 yok"})}):(0,U.jsx)(F.default,{data:o,renderItem:function(e){var r=e.item;return(0,U.jsx)(j.default,{style:te.userItem,onPress:function(){return function(e){var r=B.currentUser;if(r){var n=[r.uid,e.uid].sort().join("_");t.navigate("Chat",{currentUserId:r.uid,otherUserId:e.uid,chatId:n,otherUserEmail:e.email})}else w.default.alert("Hata","Kullan\u0131c\u0131 giri\u015fi bulunamad\u0131")}(r)},children:(0,U.jsxs)(p.default,{style:te.userInfo,children:[(0,U.jsx)(v.default,{style:te.userEmail,children:r.email}),r.username&&(0,U.jsx)(v.default,{style:te.username,children:r.username})]})})},keyExtractor:function(e){return e.uid},contentContainerStyle:te.listContainer})]})};var ne=(0,o.default)(),ae=(0,l.createBottomTabNavigator)();function ie(){return(0,U.jsxs)(ae.Navigator,{screenOptions:function(e){var t=e.route;return{tabBarIcon:function(e){var r,n=e.focused,a=e.color,i=e.size;return"Chats"===t.name?r=n?"chatbubbles":"chatbubbles-outline":"Account"===t.name&&(r=n?"person":"person-outline"),(0,U.jsx)(s.default,{name:r,size:i,color:a})},tabBarActiveTintColor:"#007AFF",tabBarInactiveTintColor:"gray"}},children:[(0,U.jsx)(ae.Screen,{name:"Chats",component:$,options:{title:"Sohbetler"}}),(0,U.jsx)(ae.Screen,{name:"Account",component:Z,options:{title:"Hesab\u0131m"}})]})}function oe(){var e=(0,a.useState)(null),t=(0,n.default)(e,2),r=t[0],o=t[1],l=(0,a.useState)(!0),s=(0,n.default)(l,2),u=s[0],c=s[1];return(0,a.useEffect)((function(){var e=(0,d.onAuthStateChanged)(m,(function(e){o(e),c(!1)}));return e}),[]),u?null:(0,U.jsx)(i.NavigationContainer,{children:(0,U.jsx)(ne.Navigator,{screenOptions:{headerShown:!1,animation:"slide_from_right"},children:r?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(ne.Screen,{name:"TabHome",component:ie}),(0,U.jsx)(ne.Screen,{name:"Chat",component:G,options:{headerShown:!0,title:"Sohbet"}}),(0,U.jsx)(ne.Screen,{name:"NewChat",component:X,options:{headerShown:!0,title:"Yeni Sohbet"}}),(0,U.jsx)(ne.Screen,{name:"Users",component:re,options:{headerShown:!0,title:"Kullan\u0131c\u0131 Se\xe7"}})]}):(0,U.jsx)(ne.Screen,{name:"Login",component:W,options:{title:"Giri\u015f Yap"}})})})}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.m=e,(()=>{var e=[];r.O=(t,n,a,i)=>{if(!n){var o=1/0;for(u=0;u<e.length;u++){for(var[n,a,i]=e[u],l=!0,s=0;s<n.length;s++)(!1&i||o>=i)&&Object.keys(r.O).every((e=>r.O[e](n[s])))?n.splice(s--,1):(l=!1,i<o&&(o=i));if(l){e.splice(u--,1);var d=a();void 0!==d&&(t=d)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,a,i]}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/",(()=>{var e={792:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var a,i,[o,l,s]=n,d=0;if(o.some((t=>0!==e[t]))){for(a in l)r.o(l,a)&&(r.m[a]=l[a]);if(s)var u=s(r)}for(t&&t(n);d<o.length;d++)i=o[d],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(u)},n=self.webpackChunkweb=self.webpackChunkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=r.O(void 0,[926],(()=>r(5036)));n=r.O(n)})();
//# sourceMappingURL=main.104836a2.js.map